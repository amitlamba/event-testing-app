!function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,o){t.exports=o(1)},function(t,e,o){"use strict";function n(t){if(t=new RegExp("[?&]"+encodeURIComponent(t)+"=([^&]*)").exec(location.search))return decodeURIComponent(t[1])}function r(){m.postData(s.baseuri+s.initializeuri).then(function(t){console.log(t),f=t.data.value,localStorage.setItem("id",JSON.stringify(f))})}function i(){localStorage.removeItem("id"),f={}}function a(){localStorage.removeItem("UtmParams")}function u(){console.log("repeat() method called.");try{if(_und.login.forEach(function(t,e,o){1==t.login&&(_und.login.splice(e,1),i())}),f){for(;_und.profile.length>0;){var t=_und.profile.shift();t.identity=f,m.postData(s.baseuri+s.profileuri,t).then(function(t){console.log(t),f=t.data.value,localStorage.setItem("id",JSON.stringify(f))})}for(;_und.event.length>0;){var e=_und.event.shift();if(e.identity=f,localStorage.getItem("UtmParams")){var o=JSON.parse(localStorage.getItem("UtmParams"));e.attributes.utm_source=o.utm_source,e.attributes.utm_medium=o.utm_medium,e.attributes.utm_campaign=o.utm_campaign,e.attributes.utm_term=o.utm_term,e.attributes.utm_content=o.utm_content}e.attributes&&Object.keys(e.attributes).forEach(function(t){e.attributes[t]instanceof Date&&(console.log("Before date",t,e.attributes[t]),e.attributes[t]=e.attributes[t].toISOString()),console.log(t,e.attributes[t])}),console.log(e),m.postData(s.baseuri+s.eventuri,e).then(function(t){console.log(t)}),localStorage.getItem("UtmParams")&&a()}_und.login.forEach(function(t,e,o){1==t.logout&&(_und.login.splice(e,1),i())})}else r()}catch(t){console.error("Error Occurred: ",t)}}var c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=c(o(2)),s=o(3);_und=_und||{event:[],profile:[],account:[],login:[],notifications:[]};var m=new l.default(_und.account[0].id),f={};localStorage&&null!=localStorage.getItem("id")&&null!=JSON.parse(localStorage.getItem("id"))?f=JSON.parse(localStorage.getItem("id")):r(),function(){if(n("utm_source")||n("utm_medium")||n("utm_campaign")||n("utm_term")||n("utm_content")){var t={utm_source:n("utm_source"),utm_medium:n("utm_medium"),utm_campaign:n("utm_campaign"),utm_term:n("utm_term"),utm_content:n("utm_content")};console.log("Saving UTM Params:"+t),localStorage.setItem("UtmParams",JSON.stringify(t))}}(),setInterval(u,1e3)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.authorization=t,this.contentType="application/json"}return t.prototype.postData=function(t,e){return console.log("Scanning through data while sending postData"),e&&Object.keys(e).forEach(function(t){console.log(t,e[t])}),fetch(t,{body:JSON.stringify(e),cache:"no-cache",headers:{"content-type":"application/json",Authorization:this.authorization},method:"POST",mode:"cors",redirect:"follow"}).then(function(t){return t.json()})},t}();e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseuri="http://nestros.com:5464",e.initializeuri="/event/initialize",e.profileuri="/push/profile",e.eventuri="/push/event"}]);